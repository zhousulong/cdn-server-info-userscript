# CDN & 服务器信息显示器

这是一个经过精心打磨和持续优化的浏览器脚本，旨在为网页开发者、网络工程师和对技术充满好奇的用户提供一个悬浮信息面板，用以实时显示当前网站所使用的CDN（内容分发网络）或服务器的详细信息。

它不仅仅是一个简单的信息展示工具，更是为应对现代复杂网络环境而设计的智能助手，尤其在处理 Cloudflare 人机验证和单页应用（SPA）兼容性方面表现出色。

---

### ✨ 主要特性 (Key Features)

* **智能兼容 Cloudflare**: 核心亮点功能。当遭遇 Cloudflare 的“五秒盾”或各类人机验证时，脚本不会立即放弃，而是会智能地等待验证通过后，再尝试获取信息。这极大地提高了在受保护网站上的可用性。

* **现代化玻璃界面 (Light Theme)**: 采用“亮色磨砂玻璃”设计，搭配深色高对比度文字，确保了在任何类型的网页背景下（尤其是常见的白色背景）都能拥有绝佳的可读性和视觉美感。

* **广泛的 CDN 支持**: 内置了针对全球主流CDN服务商的精确识别规则，包括 **Cloudflare, AWS CloudFront, Fastly, Vercel, QUIC.cloud, Tencent EdgeOne** 等，并对未知服务商提供基础信息展示。

* **支持单页应用 (SPA)**: 通过 `MutationObserver` 监听页面变化，即使在不刷新页面的情况下（如在 GitHub, YouTube, Twitter 内跳转），面板信息也会自动为新“页面”重新加载，确保信息始终准确。

* **轻量高效**: 默认配置了 `@noframes` 指令，从源头上避免在任何 `<iframe>` 中加载和运行，减少不必要的资源消耗，让脚本运行得更纯粹、更高效。

* **简单交互**:
    * **自由拖动**: 按住面板任意位置即可将其拖动到屏幕的任何地方。
    * **一键关闭**: 点击右上角的 `×` 按钮可临时关闭面板，刷新页面后会再次出现。

---

### 🔧 工作原理 (How It Works)

脚本通过以下步骤智能地工作：

1.  **发起请求**: 页面加载完成后，脚本会向当前页面的URL发起一个轻量的 `HEAD` 网络请求，以获取服务器返回的HTTP响应头信息，而不下载整个页面内容。
2.  **智能重试**: 如果初次请求失败（这通常发生在需要Cloudflare验证的页面），脚本会进入等待和重试模式，在延迟几秒后再次尝试，直到成功或达到最大重试次数。
3.  **规则解析**: 成功获取头部信息后，脚本会通过内置的CDN规则库进行匹配，解析出服务商、缓存状态、POP地点等关键信息。
4.  **动态渲染**: 最后，脚本将解析出的信息渲染到美观、可读的悬浮面板中。

---

### 📖 操作说明 (Instructions)

1.  **安装**: 通过 Tampermonkey 或其他兼容的浏览器扩展安装此脚本。
2.  **浏览**: 正常访问任何网站即可。
3.  **查看**: 脚本加载成功后，信息面板会自动出现在屏幕的右下角。
4.  **交互**:
    * 按住面板可在屏幕上自由拖动。
    * 点击面板右上角的 `×` 可将其关闭。

---

### 💡 常见问题 (FAQ)

* **为什么有时候面板没有出现？**
    * **请稍等片刻**: 在有Cloudflare验证的网站上，脚本会等待几秒到几十秒后才会显示。
    * **网站安全策略**: 某些网站的CORS（跨域资源共享）策略可能极其严格，会阻止脚本发起的自身`HEAD`请求，导致无法获取信息。
    * **页面被排除**: 脚本内置了排除列表，在登录、支付等敏感页面或特定广告框架中不会运行。

* **“POP Location” 是什么意思？**
    * POP (Point of Presence) 指的是CDN服务商的“存在点”，通常是一个地理位置较近的数据中心。例如 `HND` 代表日本东京羽田，`SIN` 代表新加坡。它告诉您内容是从哪个城市的服务器节点发送给您的。

* **“Cache Status” 中的 HIT 和 MISS 代表什么？**
    * **HIT (命中)**: 表示您请求的内容在CDN的缓存服务器上被直接找到，响应速度非常快。
    * **MISS (未命中)**: 表示CDN缓存中没有您要的内容，需要返回源头服务器（Origin Server）去获取，速度相对较慢。

---

### 🤝 反馈与贡献

本脚本的许多重要改进（尤其是对腾讯云、QUIC.cloud的识别和各种UI优化）都来自于用户的宝贵反馈。如果您遇到无法识别的CDN，或有任何功能建议和想法，欢迎通过 Greasy Fork 的反馈渠道告知我。您的每一次反馈都能让这个脚本变得更强大、更完善。
